<div data-role="view" data-title="Licenses List" data-layout="main" data-model="app.homeView" data-show="app.homeView.onShow" data-after-show="app.homeView.afterShow">
    <!-- START_CUSTOM_CODE_homeView -->
    <!-- END_CUSTOM_CODE_homeView -->
    <!--  Certain features like grouping and inset styling are not supported when endless scroll is enabled. -->
    <ul data-role="listview" data-style="" data-template="homeViewModelTemplate" data-bind="{ source: homeViewModel.dataSource, events: {click: homeViewModel.itemClick}}" data-pull-to-refresh="true" data-endless-scroll="true" data-filterable="{field: 'usrl_product', operator: 'contains'}">
    </ul>
    <!-- START_CUSTOM_CODE_homeViewModel -->
    <!-- END_CUSTOM_CODE_homeViewModel -->
    <script type="text/x-kendo-template" id="homeViewModelTemplate">
    <!-- Select color for item depending on days left for license -->
    	# var color = 'no-active-item';
        if(data['usrl_deactive_date']){
        	var date1 = new Date();
        	var date2 = data['usrl_deactive_date'];
        	var timeDiff = date2.getTime() - date1.getTime();
			var daysLeft = Math.ceil(timeDiff / (1000 * 3600 * 24)); 
            if(daysLeft >= 30){
            	color = 'greenItem';
            }else{
            	if(daysLeft >= 15){
                	color = 'orangeItem';
                }else{
                	color = 'redItem';
                }
            }
        }
        #

        <div class="image-with-text">
            <h5 class= #: color #>#: data['usrl_product'] #</h5>
            <h3>#: data['usrl_description'] #</h3>

        </div>
    </script>
</div>